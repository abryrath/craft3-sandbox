!function(e){function t(t){for(var s,o,c=t[0],a=t[1],u=t[2],h=0,d=[];h<c.length;h++)o=c[h],r[o]&&d.push(r[o][0]),r[o]=0;for(s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s]);for(l&&l(t);d.length;)d.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],s=!0,c=1;c<n.length;c++){var a=n[c];0!==r[a]&&(s=!1)}s&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var s={},r={main:0},i=[];function o(t){if(s[t])return s[t].exports;var n=s[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=s,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(n,s,function(t){return e[t]}.bind(null,s));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var c=window.webpackJsonp=window.webpackJsonp||[],a=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var l=a;i.push([0,"vendor"]),n()}({"./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./node_modules/sass-loader/lib/loader.js!./resources/scss/field.scss":
/*!********************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader!./node_modules/postcss-loader/src??embedded!./node_modules/sass-loader/lib/loader.js!./resources/scss/field.scss ***!
  \********************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,t,n){},"./resources/js/RelatedEntryTypesField.ts":
/*!************************************************!*\
  !*** ./resources/js/RelatedEntryTypesField.ts ***!
  \************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t);var s=n(/*! ./components/ChannelGroup */"./resources/js/components/ChannelGroup.ts"),r=n(/*! ./components/SectionMap */"./resources/js/components/SectionMap.ts"),i=n(/*! ./components/EntryTypeGroup */"./resources/js/components/EntryTypeGroup.ts"),o=function(){function e(e){var t=this;this.namespacedId=e.namespace;var n=e.prefix;this.activeSections=[];var o=document.querySelector("#"+n+n+"channels");if(o){this.channelGroup=new s.default(o),this.activeSections=this.channelGroup.getActiveChannels();var c=JSON.parse(o.dataset.relatedEntryTypesChannels);this.sectionMap=new r.default(c.sections,c.entryTypes)}var a=document.querySelector("#"+n+n+"select");a&&(this.entryTypeGroup=new i.default(a),this.entryTypeGroup.setEntryTypes(this.sectionMap.getEntryTypesByChannelArray(this.activeSections)),this.entryTypeGroup.render()),this.updateActiveSections=this.updateActiveSections.bind(this),o.parentElement.addEventListener("channelChange",function(e){var n=e.detail,s=n.all,r=n.active;t.updateActiveSections(s,r)})}return e.prototype.updateActiveSections=function(e,t){this.activeSections=e?t?this.channelGroup.getChannels():[]:this.channelGroup.getActiveChannels();var n=this.sectionMap.getEntryTypesByChannelArray(this.activeSections);this.entryTypeGroup.setEntryTypes(n),this.entryTypeGroup.render()},e}();t.default=o,window.RelatedEntryTypesField=o},"./resources/js/components/AllChannel.ts":
/*!***********************************************!*\
  !*** ./resources/js/components/AllChannel.ts ***!
  \***********************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t);var s,r=n(/*! ./Channel */"./resources/js/components/Channel.ts"),i=(s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(t){return e.call(this,t)||this}return i(t,e),t.prototype.checkboxChangeHandler=function(e){var t=e.target;this.active=t.checked;var n=new CustomEvent("channelChange",{detail:{sectionUid:this.uid,active:this.active,all:!0},bubbles:!0});return this.checkbox.dispatchEvent(n)},t}(r.default);t.default=o},"./resources/js/components/Channel.ts":
/*!********************************************!*\
  !*** ./resources/js/components/Channel.ts ***!
  \********************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t);var s=function(){function e(e){this.checkbox=e,this.active=e.checked;var t=e.value.match(/section:(.*)/);t&&t.length&&(this.uid=t[1]),this.name=e.value;var n=document.querySelector('label[for="'+this.checkbox.id+'"]');n&&(this.label=n.innerText),this.checkboxChangeHandler=this.checkboxChangeHandler.bind(this),this.updateActiveStatus=this.updateActiveStatus.bind(this),this.checkbox.addEventListener("change",this.checkboxChangeHandler)}return e.prototype.updateActiveStatus=function(){this.active=this.checkbox.checked},e.prototype.checkboxChangeHandler=function(e){var t=e.target;this.active=t.checked;var n=new CustomEvent("channelChange",{detail:{sectionUid:this.uid,active:this.active,all:!1},bubbles:!0});return this.checkbox.dispatchEvent(n)},e}();t.default=s},"./resources/js/components/ChannelGroup.ts":
/*!*************************************************!*\
  !*** ./resources/js/components/ChannelGroup.ts ***!
  \*************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t);var s=n(/*! ./Channel */"./resources/js/components/Channel.ts"),r=n(/*! ./AllChannel */"./resources/js/components/AllChannel.ts"),i=function(){function e(e){this.node=e;var t=e.querySelectorAll('input[type="checkbox"]');this.channels=Array.from(t).map(function(e){return"*"===e.value?new r.default(e):new s.default(e)}),this.getActiveChannels=this.getActiveChannels.bind(this),this.getChannels=this.getChannels.bind(this)}return e.prototype.getChannels=function(){return this.channels},e.prototype.getActiveChannels=function(){return this.channels.filter(function(e){return e.updateActiveStatus(),e.active})},e}();t.default=i},"./resources/js/components/EntryType.ts":
/*!**********************************************!*\
  !*** ./resources/js/components/EntryType.ts ***!
  \**********************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t);var s=function(){function e(e){this.id=e.id,this.label=e.label,this.sectionUid=e.sectionUid,this.active=e.active,this.toHtml=this.toHtml.bind(this)}return e.prototype.toHtml=function(){return'<div>\n            <input type="checkbox" name="types[unionco\\relatedentrytypes\\fields\\RelatedEntryTypesField][entryTypes][]" class="checkbox" value="'+this.id+'" id="entryType-'+this.id+'" '+(this.active?"checked":"")+'/>\n            <label for="entryType-'+this.id+'">'+this.label+"</label>\n        </div>"},e}();t.default=s},"./resources/js/components/EntryTypeGroup.ts":
/*!***************************************************!*\
  !*** ./resources/js/components/EntryTypeGroup.ts ***!
  \***************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t);var s=function(){function e(e){this.node=e}return e.prototype.render=function(){console.log(this.entryTypes);var e=this.node.querySelectorAll(".field.checkboxfield"),t=this.entryTypes.map(function(e){return e.id.toString()});e.forEach(function(e){var n=e.querySelector('input[type="checkbox"]').value;t.includes(n)?e.hidden=!1:e.hidden=!0})},e.prototype.setEntryTypes=function(e){this.entryTypes=e},e}();t.default=s},"./resources/js/components/SectionMap.ts":
/*!***********************************************!*\
  !*** ./resources/js/components/SectionMap.ts ***!
  \***********************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t);var s=n(/*! ./EntryType */"./resources/js/components/EntryType.ts"),r=function(){function e(e,t){this.sections=e,this.entryTypes=t.map(function(e){return new s.default(e)}),this.getEntryTypesBySectionUid=this.getEntryTypesBySectionUid.bind(this),this.getEntryTypesBySectionUidArray=this.getEntryTypesBySectionUidArray.bind(this),this.getEntryTypesByChannelArray=this.getEntryTypesByChannelArray.bind(this)}return e.prototype.getEntryTypesBySectionUid=function(e){if(!e||!e.length)return[];var t=this.entryTypes.filter(function(t){return t.sectionUid===e});return t&&t.length?t:[]},e.prototype.getEntryTypesBySectionUidArray=function(e){var t=this,n=[];return e.forEach(function(e){t.getEntryTypesBySectionUid(e).forEach(function(e){n.push(e)})}),n},e.prototype.getEntryTypesByChannelArray=function(e){var t=e.map(function(e){return e.uid});return this.getEntryTypesBySectionUidArray(t)},e}();t.default=r},"./resources/scss/field.scss":
/*!***********************************!*\
  !*** ./resources/scss/field.scss ***!
  \***********************************/
/*! no static exports found */function(e,t,n){var s=n(/*! !../../node_modules/mini-css-extract-plugin/dist/loader.js!../../node_modules/css-loader!../../node_modules/postcss-loader/src??embedded!../../node_modules/sass-loader/lib/loader.js!./field.scss */"./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./node_modules/sass-loader/lib/loader.js!./resources/scss/field.scss");"string"==typeof s&&(s=[[e.i,s,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(/*! ../../node_modules/style-loader/lib/addStyles.js */"./node_modules/style-loader/lib/addStyles.js")(s,r);s.locals&&(e.exports=s.locals)},0:
/*!**********************************************************************************!*\
  !*** multi ./resources/js/RelatedEntryTypesField.ts ./resources/scss/field.scss ***!
  \**********************************************************************************/
/*! no static exports found */function(e,t,n){n(/*! /Users/abryrath/Union/Library/relatedentrytypes/resources/js/RelatedEntryTypesField.ts */"./resources/js/RelatedEntryTypesField.ts"),e.exports=n(/*! /Users/abryrath/Union/Library/relatedentrytypes/resources/scss/field.scss */"./resources/scss/field.scss")}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vcmVzb3VyY2VzL2pzL1JlbGF0ZWRFbnRyeVR5cGVzRmllbGQudHMiLCJ3ZWJwYWNrOi8vLy4vcmVzb3VyY2VzL2pzL2NvbXBvbmVudHMvQWxsQ2hhbm5lbC50cyIsIndlYnBhY2s6Ly8vLi9yZXNvdXJjZXMvanMvY29tcG9uZW50cy9DaGFubmVsLnRzIiwid2VicGFjazovLy8uL3Jlc291cmNlcy9qcy9jb21wb25lbnRzL0NoYW5uZWxHcm91cC50cyIsIndlYnBhY2s6Ly8vLi9yZXNvdXJjZXMvanMvY29tcG9uZW50cy9FbnRyeVR5cGUudHMiLCJ3ZWJwYWNrOi8vLy4vcmVzb3VyY2VzL2pzL2NvbXBvbmVudHMvRW50cnlUeXBlR3JvdXAudHMiLCJ3ZWJwYWNrOi8vLy4vcmVzb3VyY2VzL2pzL2NvbXBvbmVudHMvU2VjdGlvbk1hcC50cyIsIndlYnBhY2s6Ly8vLi9yZXNvdXJjZXMvc2Nzcy9maWVsZC5zY3NzIl0sIm5hbWVzIjpbIndlYnBhY2tKc29ucENhbGxiYWNrIiwiZGF0YSIsIm1vZHVsZUlkIiwiY2h1bmtJZCIsImNodW5rSWRzIiwibW9yZU1vZHVsZXMiLCJleGVjdXRlTW9kdWxlcyIsImkiLCJyZXNvbHZlcyIsImxlbmd0aCIsImluc3RhbGxlZENodW5rcyIsInB1c2giLCJPYmplY3QiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJtb2R1bGVzIiwicGFyZW50SnNvbnBGdW5jdGlvbiIsInNoaWZ0IiwiZGVmZXJyZWRNb2R1bGVzIiwiYXBwbHkiLCJjaGVja0RlZmVycmVkTW9kdWxlcyIsInJlc3VsdCIsImRlZmVycmVkTW9kdWxlIiwiZnVsZmlsbGVkIiwiaiIsImRlcElkIiwic3BsaWNlIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsInMiLCJpbnN0YWxsZWRNb2R1bGVzIiwibWFpbiIsImV4cG9ydHMiLCJtb2R1bGUiLCJsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInAiLCJqc29ucEFycmF5Iiwid2luZG93Iiwib2xkSnNvbnBGdW5jdGlvbiIsInNsaWNlIiwiX193ZWJwYWNrX2V4cG9ydHNfXyIsIl9jb21wb25lbnRzX0NoYW5uZWxHcm91cF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fIiwiX2NvbXBvbmVudHNfU2VjdGlvbk1hcF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fIiwiX2NvbXBvbmVudHNfRW50cnlUeXBlR3JvdXBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyIsIlJlbGF0ZWRFbnRyeVR5cGVzRmllbGQiLCJqc29uVmFycyIsIl90aGlzIiwidGhpcyIsIm5hbWVzcGFjZWRJZCIsIm5hbWVzcGFjZSIsInByZWZpeCIsImFjdGl2ZVNlY3Rpb25zIiwiY2hhbm5lbEdyb3VwQ29udGFpbmVyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY2hhbm5lbEdyb3VwIiwiZ2V0QWN0aXZlQ2hhbm5lbHMiLCJzZWN0aW9uTWFwRGF0YSIsIkpTT04iLCJwYXJzZSIsImRhdGFzZXQiLCJyZWxhdGVkRW50cnlUeXBlc0NoYW5uZWxzIiwic2VjdGlvbk1hcCIsInNlY3Rpb25zIiwiZW50cnlUeXBlcyIsImVudHJ5VHlwZXNHcm91cENvbnRhaW5lciIsImVudHJ5VHlwZUdyb3VwIiwic2V0RW50cnlUeXBlcyIsImdldEVudHJ5VHlwZXNCeUNoYW5uZWxBcnJheSIsInJlbmRlciIsInVwZGF0ZUFjdGl2ZVNlY3Rpb25zIiwicGFyZW50RWxlbWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwiZXZlbnREZXRhaWwiLCJkZXRhaWwiLCJhbGwiLCJhY3RpdmUiLCJnZXRDaGFubmVscyIsIkFsbENoYW5uZWwiLCJfc3VwZXIiLCJub2RlIiwiX19leHRlbmRzIiwiY2hlY2tib3hDaGFuZ2VIYW5kbGVyIiwiY2hhbmdlRXZlbnQiLCJ0YXJnZXQiLCJjaGVja2VkIiwiZXZlbnQiLCJDdXN0b21FdmVudCIsInNlY3Rpb25VaWQiLCJ1aWQiLCJidWJibGVzIiwiY2hlY2tib3giLCJkaXNwYXRjaEV2ZW50IiwiX0NoYW5uZWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyIsIkNoYW5uZWwiLCJ1aWRNYXRjaCIsIm1hdGNoIiwibGFiZWwiLCJpZCIsImlubmVyVGV4dCIsInVwZGF0ZUFjdGl2ZVN0YXR1cyIsIl9BbGxDaGFubmVsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18iLCJDaGFubmVsR3JvdXAiLCJjaGVja2JveGVzIiwicXVlcnlTZWxlY3RvckFsbCIsImNoYW5uZWxzIiwiQXJyYXkiLCJmcm9tIiwibWFwIiwiZmlsdGVyIiwiY2hhbm5lbCIsIkVudHJ5VHlwZSIsImVudHJ5VHlwZSIsInRvSHRtbCIsIkVudHJ5VHlwZUdyb3VwIiwiY29uc29sZSIsImxvZyIsImZpZWxkcyIsImVudHJ5VHlwZUlkcyIsInRvU3RyaW5nIiwiZm9yRWFjaCIsImZpZWxkQ29udGFpbmVyIiwiaW5jbHVkZXMiLCJoaWRkZW4iLCJfRW50cnlUeXBlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18iLCJTZWN0aW9uTWFwIiwiZW50cnlUeXBlT2JqZWN0IiwiZ2V0RW50cnlUeXBlc0J5U2VjdGlvblVpZCIsImdldEVudHJ5VHlwZXNCeVNlY3Rpb25VaWRBcnJheSIsIm1hdGNoaW5nVWlkIiwidWlkcyIsImNvbnRlbnQiLCJvcHRpb25zIiwiaG1yIiwidHJhbnNmb3JtIiwiaW5zZXJ0SW50byIsInVuZGVmaW5lZCIsImxvY2FscyJdLCJtYXBwaW5ncyI6ImFBQ0EsU0FBQUEsRUFBQUMsR0FRQSxJQVBBLElBTUFDLEVBQUFDLEVBTkFDLEVBQUFILEVBQUEsR0FD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QUMsRUFBQSxDQUFlQyxLQUFBLEVBRWZDLGVBUEFBLEVBUUFDLGdCQUFBQyxHQUVhcEkseURBQVEsK0NBQVJBLENBQTJEK0gsRUFBQUMsR0FFeEVELEVBQUFNLFNBQUFoSSxFQUFBRCxRQUFBMkgsRUFBQU0iLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIGluc3RhbGwgYSBKU09OUCBjYWxsYmFjayBmb3IgY2h1bmsgbG9hZGluZ1xuIFx0ZnVuY3Rpb24gd2VicGFja0pzb25wQ2FsbGJhY2soZGF0YSkge1xuIFx0XHR2YXIgY2h1bmtJZHMgPSBkYXRhWzBdO1xuIFx0XHR2YXIgbW9yZU1vZHVsZXMgPSBkYXRhWzFdO1xuIFx0XHR2YXIgZXhlY3V0ZU1vZHVsZXMgPSBkYXRhWzJdO1xuXG4gXHRcdC8vIGFkZCBcIm1vcmVNb2R1bGVzXCIgdG8gdGhlIG1vZHVsZXMgb2JqZWN0LFxuIFx0XHQvLyB0aGVuIGZsYWcgYWxsIFwiY2h1bmtJZHNcIiBhcyBsb2FkZWQgYW5kIGZpcmUgY2FsbGJhY2tcbiBcdFx0dmFyIG1vZHVsZUlkLCBjaHVua0lkLCBpID0gMCwgcmVzb2x2ZXMgPSBbXTtcbiBcdFx0Zm9yKDtpIDwgY2h1bmtJZHMubGVuZ3RoOyBpKyspIHtcbiBcdFx0XHRjaHVua0lkID0gY2h1bmtJZHNbaV07XG4gXHRcdFx0aWYoaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdKSB7XG4gXHRcdFx0XHRyZXNvbHZlcy5wdXNoKGluc3RhbGxlZENodW5rc1tjaHVua0lkXVswXSk7XG4gXHRcdFx0fVxuIFx0XHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9IDA7XG4gXHRcdH1cbiBcdFx0Zm9yKG1vZHVsZUlkIGluIG1vcmVNb2R1bGVzKSB7XG4gXHRcdFx0aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vcmVNb2R1bGVzLCBtb2R1bGVJZCkpIHtcbiBcdFx0XHRcdG1vZHVsZXNbbW9kdWxlSWRdID0gbW9yZU1vZHVsZXNbbW9kdWxlSWRdO1xuIFx0XHRcdH1cbiBcdFx0fVxuIFx0XHRpZihwYXJlbnRKc29ucEZ1bmN0aW9uKSBwYXJlbnRKc29ucEZ1bmN0aW9uKGRhdGEpO1xuXG4gXHRcdHdoaWxlKHJlc29sdmVzLmxlbmd0aCkge1xuIFx0XHRcdHJlc29sdmVzLnNoaWZ0KCkoKTtcbiBcdFx0fVxuXG4gXHRcdC8vIGFkZCBlbnRyeSBtb2R1bGVzIGZyb20gbG9hZGVkIGNodW5rIHRvIGRlZmVycmVkIGxpc3RcbiBcdFx0ZGVmZXJyZWRNb2R1bGVzLnB1c2guYXBwbHkoZGVmZXJyZWRNb2R1bGVzLCBleGVjdXRlTW9kdWxlcyB8fCBbXSk7XG5cbiBcdFx0Ly8gcnVuIGRlZmVycmVkIG1vZHVsZXMgd2hlbiBhbGwgY2h1bmtzIHJlYWR5XG4gXHRcdHJldHVybiBjaGVja0RlZmVycmVkTW9kdWxlcygpO1xuIFx0fTtcbiBcdGZ1bmN0aW9uIGNoZWNrRGVmZXJyZWRNb2R1bGVzKCkge1xuIFx0XHR2YXIgcmVzdWx0O1xuIFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgZGVmZXJyZWRNb2R1bGVzLmxlbmd0aDsgaSsrKSB7XG4gXHRcdFx0dmFyIGRlZmVycmVkTW9kdWxlID0gZGVmZXJyZWRNb2R1bGVzW2ldO1xuIFx0XHRcdHZhciBmdWxmaWxsZWQgPSB0cnVlO1xuIFx0XHRcdGZvcih2YXIgaiA9IDE7IGogPCBkZWZlcnJlZE1vZHVsZS5sZW5ndGg7IGorKykge1xuIFx0XHRcdFx0dmFyIGRlcElkID0gZGVmZXJyZWRNb2R1bGVbal07XG4gXHRcdFx0XHRpZihpbnN0YWxsZWRDaHVua3NbZGVwSWRdICE9PSAwKSBmdWxmaWxsZWQgPSBmYWxzZTtcbiBcdFx0XHR9XG4gXHRcdFx0aWYoZnVsZmlsbGVkKSB7XG4gXHRcdFx0XHRkZWZlcnJlZE1vZHVsZXMuc3BsaWNlKGktLSwgMSk7XG4gXHRcdFx0XHRyZXN1bHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IGRlZmVycmVkTW9kdWxlWzBdKTtcbiBcdFx0XHR9XG4gXHRcdH1cbiBcdFx0cmV0dXJuIHJlc3VsdDtcbiBcdH1cblxuIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gb2JqZWN0IHRvIHN0b3JlIGxvYWRlZCBhbmQgbG9hZGluZyBjaHVua3NcbiBcdC8vIHVuZGVmaW5lZCA9IGNodW5rIG5vdCBsb2FkZWQsIG51bGwgPSBjaHVuayBwcmVsb2FkZWQvcHJlZmV0Y2hlZFxuIFx0Ly8gUHJvbWlzZSA9IGNodW5rIGxvYWRpbmcsIDAgPSBjaHVuayBsb2FkZWRcbiBcdHZhciBpbnN0YWxsZWRDaHVua3MgPSB7XG4gXHRcdFwibWFpblwiOiAwXG4gXHR9O1xuXG4gXHR2YXIgZGVmZXJyZWRNb2R1bGVzID0gW107XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdHZhciBqc29ucEFycmF5ID0gd2luZG93W1wid2VicGFja0pzb25wXCJdID0gd2luZG93W1wid2VicGFja0pzb25wXCJdIHx8IFtdO1xuIFx0dmFyIG9sZEpzb25wRnVuY3Rpb24gPSBqc29ucEFycmF5LnB1c2guYmluZChqc29ucEFycmF5KTtcbiBcdGpzb25wQXJyYXkucHVzaCA9IHdlYnBhY2tKc29ucENhbGxiYWNrO1xuIFx0anNvbnBBcnJheSA9IGpzb25wQXJyYXkuc2xpY2UoKTtcbiBcdGZvcih2YXIgaSA9IDA7IGkgPCBqc29ucEFycmF5Lmxlbmd0aDsgaSsrKSB3ZWJwYWNrSnNvbnBDYWxsYmFjayhqc29ucEFycmF5W2ldKTtcbiBcdHZhciBwYXJlbnRKc29ucEZ1bmN0aW9uID0gb2xkSnNvbnBGdW5jdGlvbjtcblxuXG4gXHQvLyBhZGQgZW50cnkgbW9kdWxlIHRvIGRlZmVycmVkIGxpc3RcbiBcdGRlZmVycmVkTW9kdWxlcy5wdXNoKFswLFwidmVuZG9yXCJdKTtcbiBcdC8vIHJ1biBkZWZlcnJlZCBtb2R1bGVzIHdoZW4gcmVhZHlcbiBcdHJldHVybiBjaGVja0RlZmVycmVkTW9kdWxlcygpO1xuIiwiaW1wb3J0IElDaGFubmVsR3JvdXAgZnJvbSAnLi9pbnRlcmZhY2VzL0lDaGFubmVsR3JvdXAnO1xuaW1wb3J0IENoYW5uZWxHcm91cCBmcm9tICcuL2NvbXBvbmVudHMvQ2hhbm5lbEdyb3VwJztcbmltcG9ydCBJU2VjdGlvbk1hcCBmcm9tICcuL2ludGVyZmFjZXMvSVNlY3Rpb25NYXAnO1xuaW1wb3J0IElDaGFubmVsIGZyb20gJy4vaW50ZXJmYWNlcy9JQ2hhbm5lbCc7XG5pbXBvcnQgU2VjdGlvbk1hcCBmcm9tICcuL2NvbXBvbmVudHMvU2VjdGlvbk1hcCc7XG5pbXBvcnQgRW50cnlUeXBlR3JvdXAgZnJvbSAnLi9jb21wb25lbnRzL0VudHJ5VHlwZUdyb3VwJztcbmltcG9ydCBJRW50cnlUeXBlR3JvdXAgZnJvbSAnLi9pbnRlcmZhY2VzL0lFbnRyeVR5cGVHcm91cCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlbGF0ZWRFbnRyeVR5cGVzRmllbGQge1xuICAgIHB1YmxpYyBjaGFubmVsR3JvdXA6IElDaGFubmVsR3JvdXA7XG4gICAgcHVibGljIGZpZWxkQ29udGFpbmVyOiBIVE1MRGl2RWxlbWVudDtcbiAgICBwdWJsaWMgZW50cnlUeXBlR3JvdXA6IElFbnRyeVR5cGVHcm91cDtcbiAgICBwcml2YXRlIHNlY3Rpb25NYXA6IElTZWN0aW9uTWFwO1xuICAgIHB1YmxpYyBhY3RpdmVTZWN0aW9uczogSUNoYW5uZWxbXTtcbiAgICBwdWJsaWMgbmFtZXNwYWNlZElkOiBzdHJpbmc7XG5cbiAgICBjb25zdHJ1Y3Rvcihqc29uVmFyczogYW55KSB7XG4gICAgICAgIHRoaXMubmFtZXNwYWNlZElkID0ganNvblZhcnMubmFtZXNwYWNlO1xuICAgICAgICBjb25zdCB7IHByZWZpeCB9ID0ganNvblZhcnM7XG4gICAgICAgIHRoaXMuYWN0aXZlU2VjdGlvbnMgPSBbXTtcbiAgICAgICAgLy8gdGhpcy5maWVsZENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2pzb25WYXJzLmlkfWApO1xuICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmZpZWxkQ29udGFpbmVyKTtcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSB0aGUgY2hhbm5lbHMgc2VsZWN0IGFyZWFcbiAgICAgICAgY29uc3QgY2hhbm5lbEdyb3VwQ29udGFpbmVyOiBIVE1MRGl2RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke3ByZWZpeH0ke3ByZWZpeH1jaGFubmVsc2ApO1xuXG4gICAgICAgIGlmIChjaGFubmVsR3JvdXBDb250YWluZXIpIHtcbiAgICAgICAgICAgIHRoaXMuY2hhbm5lbEdyb3VwID0gbmV3IENoYW5uZWxHcm91cChjaGFubmVsR3JvdXBDb250YWluZXIpO1xuICAgICAgICAgICAgdGhpcy5hY3RpdmVTZWN0aW9ucyA9IHRoaXMuY2hhbm5lbEdyb3VwLmdldEFjdGl2ZUNoYW5uZWxzKCk7XG4gICAgICAgICAgICBjb25zdCBzZWN0aW9uTWFwRGF0YTogSVNlY3Rpb25NYXAgPSBKU09OLnBhcnNlKGNoYW5uZWxHcm91cENvbnRhaW5lci5kYXRhc2V0LnJlbGF0ZWRFbnRyeVR5cGVzQ2hhbm5lbHMpO1xuICAgICAgICAgICAgdGhpcy5zZWN0aW9uTWFwID0gbmV3IFNlY3Rpb25NYXAoc2VjdGlvbk1hcERhdGEuc2VjdGlvbnMsIHNlY3Rpb25NYXBEYXRhLmVudHJ5VHlwZXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZW50cnlUeXBlc0dyb3VwQ29udGFpbmVyOiBIVE1MRGl2RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke3ByZWZpeH0ke3ByZWZpeH1zZWxlY3RgKTtcblxuICAgICAgICBpZiAoZW50cnlUeXBlc0dyb3VwQ29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aGlzLmVudHJ5VHlwZUdyb3VwID0gbmV3IEVudHJ5VHlwZUdyb3VwKGVudHJ5VHlwZXNHcm91cENvbnRhaW5lcik7XG5cbiAgICAgICAgICAgIHRoaXMuZW50cnlUeXBlR3JvdXAuc2V0RW50cnlUeXBlcyh0aGlzLnNlY3Rpb25NYXAuZ2V0RW50cnlUeXBlc0J5Q2hhbm5lbEFycmF5KHRoaXMuYWN0aXZlU2VjdGlvbnMpKTtcbiAgICAgICAgICAgIHRoaXMuZW50cnlUeXBlR3JvdXAucmVuZGVyKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBNZXRob2QgYmluZGluZ1xuICAgICAgICB0aGlzLnVwZGF0ZUFjdGl2ZVNlY3Rpb25zID0gdGhpcy51cGRhdGVBY3RpdmVTZWN0aW9ucy5iaW5kKHRoaXMpO1xuXG4gICAgICAgIC8vIEV2ZW50IExpc3RlbmVyc1xuICAgICAgICBjaGFubmVsR3JvdXBDb250YWluZXIucGFyZW50RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjaGFubmVsQ2hhbmdlJywgKGU6IEN1c3RvbUV2ZW50KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBldmVudERldGFpbCA9IGUuZGV0YWlsO1xuICAgICAgICAgICAgY29uc3QgeyBhbGwsIGFjdGl2ZSB9ID0gZXZlbnREZXRhaWw7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUFjdGl2ZVNlY3Rpb25zKGFsbCwgYWN0aXZlKTsgLy8gc2VjdGlvblVpZCwgYWN0aXZlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIHVwZGF0ZUFjdGl2ZVNlY3Rpb25zKGFsbDogYm9vbGVhbiwgYWN0aXZlOiBib29sZWFuKSB7XG4gICAgICAgIGlmIChhbGwpIHtcbiAgICAgICAgICAgIGlmIChhY3RpdmUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZVNlY3Rpb25zID0gdGhpcy5jaGFubmVsR3JvdXAuZ2V0Q2hhbm5lbHMoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVTZWN0aW9ucyA9IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5hY3RpdmVTZWN0aW9ucyA9IHRoaXMuY2hhbm5lbEdyb3VwLmdldEFjdGl2ZUNoYW5uZWxzKCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZW50cnlUeXBlcyA9IHRoaXMuc2VjdGlvbk1hcC5nZXRFbnRyeVR5cGVzQnlDaGFubmVsQXJyYXkodGhpcy5hY3RpdmVTZWN0aW9ucyk7XG5cbiAgICAgICAgdGhpcy5lbnRyeVR5cGVHcm91cC5zZXRFbnRyeVR5cGVzKGVudHJ5VHlwZXMpO1xuICAgICAgICB0aGlzLmVudHJ5VHlwZUdyb3VwLnJlbmRlcigpO1xuICAgIH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICAgIGludGVyZmFjZSBXaW5kb3cge1xuICAgICAgICBSZWxhdGVkRW50cnlUeXBlc0ZpZWxkOiBhbnk7XG4gICAgfVxufVxuXG53aW5kb3cuUmVsYXRlZEVudHJ5VHlwZXNGaWVsZCA9IFJlbGF0ZWRFbnRyeVR5cGVzRmllbGQ7IiwiaW1wb3J0IElDaGFubmVsIGZyb20gXCIuLi9pbnRlcmZhY2VzL0lDaGFubmVsXCI7XG5pbXBvcnQgQ2hhbm5lbCBmcm9tICcuL0NoYW5uZWwnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBbGxDaGFubmVsIGV4dGVuZHMgQ2hhbm5lbCBpbXBsZW1lbnRzIElDaGFubmVsIHtcbiAgICBjb25zdHJ1Y3Rvcihub2RlOiBIVE1MSW5wdXRFbGVtZW50KSB7XG4gICAgICAgIHN1cGVyKG5vZGUpO1xuICAgIH1cblxuICAgIHB1YmxpYyBjaGVja2JveENoYW5nZUhhbmRsZXIoY2hhbmdlRXZlbnQ6IEV2ZW50KTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IHRhcmdldDogSFRNTElucHV0RWxlbWVudCA9IGNoYW5nZUV2ZW50LnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgICAgICB0aGlzLmFjdGl2ZSA9IHRhcmdldC5jaGVja2VkO1xuXG4gICAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdjaGFubmVsQ2hhbmdlJywge1xuICAgICAgICAgICAgZGV0YWlsOiB7XG4gICAgICAgICAgICAgICAgc2VjdGlvblVpZDogdGhpcy51aWQsXG4gICAgICAgICAgICAgICAgYWN0aXZlOiB0aGlzLmFjdGl2ZSxcbiAgICAgICAgICAgICAgICBhbGw6IHRydWVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBidWJibGVzOiB0cnVlXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmNoZWNrYm94LmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgIH1cbn0iLCJpbXBvcnQgSUNoYW5uZWwgZnJvbSBcIi4uL2ludGVyZmFjZXMvSUNoYW5uZWxcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2hhbm5lbCBpbXBsZW1lbnRzIElDaGFubmVsIHtcbiAgICBwcm90ZWN0ZWQgY2hlY2tib3g6IEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgcHVibGljIG5hbWU6IHN0cmluZztcbiAgICBwdWJsaWMgbGFiZWw6IHN0cmluZztcbiAgICBwdWJsaWMgdWlkOiBzdHJpbmc7XG4gICAgcHVibGljIGFjdGl2ZTogYm9vbGVhbjtcblxuICAgIGNvbnN0cnVjdG9yKG5vZGU6IEhUTUxJbnB1dEVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5jaGVja2JveCA9IG5vZGU7XG4gICAgICAgIHRoaXMuYWN0aXZlID0gbm9kZS5jaGVja2VkO1xuXG4gICAgICAgIGNvbnN0IHVpZE1hdGNoID0gbm9kZS52YWx1ZS5tYXRjaCgvc2VjdGlvbjooLiopLyk7XG4gICAgICAgIFxuICAgICAgICBpZiAodWlkTWF0Y2ggJiYgdWlkTWF0Y2gubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLnVpZCA9IHVpZE1hdGNoWzFdO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5uYW1lID0gbm9kZS52YWx1ZTtcbiAgICAgICAgY29uc3QgbGFiZWw6IEhUTUxMYWJlbEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBsYWJlbFtmb3I9XCIke3RoaXMuY2hlY2tib3guaWR9XCJdYCk7XG4gICAgICAgIFxuICAgICAgICBpZiAobGFiZWwpIHtcbiAgICAgICAgICAgIHRoaXMubGFiZWwgPSBsYWJlbC5pbm5lclRleHQ7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBNZXRob2QgYmluZGluZ1xuICAgICAgICB0aGlzLmNoZWNrYm94Q2hhbmdlSGFuZGxlciA9IHRoaXMuY2hlY2tib3hDaGFuZ2VIYW5kbGVyLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMudXBkYXRlQWN0aXZlU3RhdHVzID0gdGhpcy51cGRhdGVBY3RpdmVTdGF0dXMuYmluZCh0aGlzKTtcblxuICAgICAgICB0aGlzLmNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHRoaXMuY2hlY2tib3hDaGFuZ2VIYW5kbGVyKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdXBkYXRlQWN0aXZlU3RhdHVzKCkge1xuICAgICAgICB0aGlzLmFjdGl2ZSA9IHRoaXMuY2hlY2tib3guY2hlY2tlZDtcbiAgICB9XG5cbiAgICBwdWJsaWMgY2hlY2tib3hDaGFuZ2VIYW5kbGVyKGNoYW5nZUV2ZW50OiBFdmVudCk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCB0YXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnQgPSBjaGFuZ2VFdmVudC50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICAgICAgdGhpcy5hY3RpdmUgPSB0YXJnZXQuY2hlY2tlZDtcblxuICAgICAgICBjb25zdCBldmVudCA9IG5ldyBDdXN0b21FdmVudCgnY2hhbm5lbENoYW5nZScsIHtcbiAgICAgICAgICAgIGRldGFpbDoge1xuICAgICAgICAgICAgICAgIHNlY3Rpb25VaWQ6IHRoaXMudWlkLFxuICAgICAgICAgICAgICAgIGFjdGl2ZTogdGhpcy5hY3RpdmUsXG4gICAgICAgICAgICAgICAgYWxsOiBmYWxzZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJ1YmJsZXM6IHRydWVcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuY2hlY2tib3guZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgfVxufSIsImltcG9ydCBJQ2hhbm5lbEdyb3VwIGZyb20gJy4uL2ludGVyZmFjZXMvSUNoYW5uZWxHcm91cCc7XG5pbXBvcnQgSUNoYW5uZWwgZnJvbSAnLi4vaW50ZXJmYWNlcy9JQ2hhbm5lbCc7XG5pbXBvcnQgQ2hhbm5lbCBmcm9tICcuL0NoYW5uZWwnO1xuaW1wb3J0IEFsbENoYW5uZWwgZnJvbSAnLi9BbGxDaGFubmVsJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2hhbm5lbEdyb3VwIGltcGxlbWVudHMgSUNoYW5uZWxHcm91cCB7XG4gICAgcHJpdmF0ZSBjaGFubmVsczogSUNoYW5uZWxbXTtcbiAgICBwcml2YXRlIG5vZGU6IEhUTUxEaXZFbGVtZW50O1xuXG4gICAgY29uc3RydWN0b3Iobm9kZTogSFRNTERpdkVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5ub2RlID0gbm9kZTtcbiAgICAgICAgY29uc3QgY2hlY2tib3hlczogTm9kZUxpc3RPZjxIVE1MSW5wdXRFbGVtZW50PiA9IG5vZGUucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJyk7XG4gICAgICAgIHRoaXMuY2hhbm5lbHMgPSBBcnJheS5mcm9tKGNoZWNrYm94ZXMpXG4gICAgICAgICAgICAubWFwKChjaGVja2JveDogSFRNTElucHV0RWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChjaGVja2JveC52YWx1ZSA9PT0gJyonKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQWxsQ2hhbm5lbChjaGVja2JveCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDaGFubmVsKGNoZWNrYm94KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgLy8gTWV0aG9kIGJpbmRpbmdcbiAgICAgICAgdGhpcy5nZXRBY3RpdmVDaGFubmVscyA9IHRoaXMuZ2V0QWN0aXZlQ2hhbm5lbHMuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5nZXRDaGFubmVscyA9IHRoaXMuZ2V0Q2hhbm5lbHMuYmluZCh0aGlzKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0Q2hhbm5lbHMoKTogSUNoYW5uZWxbXSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNoYW5uZWxzO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRBY3RpdmVDaGFubmVscygpOiBJQ2hhbm5lbFtdIHtcbiAgICAgICAgY29uc3QgYWN0aXZlQ2hhbm5lbHMgPSB0aGlzLmNoYW5uZWxzLmZpbHRlcigoY2hhbm5lbDogSUNoYW5uZWwpID0+IHtcbiAgICAgICAgICAgIGNoYW5uZWwudXBkYXRlQWN0aXZlU3RhdHVzKCk7XG4gICAgICAgICAgICByZXR1cm4gY2hhbm5lbC5hY3RpdmU7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBhY3RpdmVDaGFubmVscztcbiAgICB9XG59IiwiaW1wb3J0IElFbnRyeVR5cGUgZnJvbSAnLi4vaW50ZXJmYWNlcy9JRW50cnlUeXBlJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRW50cnlUeXBlIGltcGxlbWVudHMgSUVudHJ5VHlwZSB7XG4gICAgcHVibGljIGlkOiBudW1iZXI7XG4gICAgcHVibGljIGxhYmVsOiBzdHJpbmc7XG4gICAgcHVibGljIHNlY3Rpb25VaWQ6IHN0cmluZztcbiAgICBwdWJsaWMgYWN0aXZlOiBib29sZWFuO1xuXG4gICAgY29uc3RydWN0b3IoZW50cnlUeXBlOiBJRW50cnlUeXBlKSB7XG4gICAgICAgIHRoaXMuaWQgPSBlbnRyeVR5cGUuaWQ7XG4gICAgICAgIHRoaXMubGFiZWwgPSBlbnRyeVR5cGUubGFiZWw7XG4gICAgICAgIHRoaXMuc2VjdGlvblVpZCA9IGVudHJ5VHlwZS5zZWN0aW9uVWlkO1xuICAgICAgICB0aGlzLmFjdGl2ZSA9IGVudHJ5VHlwZS5hY3RpdmU7XG5cbiAgICAgICAgdGhpcy50b0h0bWwgPSB0aGlzLnRvSHRtbC5iaW5kKHRoaXMpO1xuICAgIH1cblxuICAgIHB1YmxpYyB0b0h0bWwoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIGA8ZGl2PlxuICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5hbWU9XCJ0eXBlc1t1bmlvbmNvXFxcXHJlbGF0ZWRlbnRyeXR5cGVzXFxcXGZpZWxkc1xcXFxSZWxhdGVkRW50cnlUeXBlc0ZpZWxkXVtlbnRyeVR5cGVzXVtdXCIgY2xhc3M9XCJjaGVja2JveFwiIHZhbHVlPVwiJHt0aGlzLmlkfVwiIGlkPVwiZW50cnlUeXBlLSR7dGhpcy5pZH1cIiAke3RoaXMuYWN0aXZlID8gJ2NoZWNrZWQnIDogJycgfS8+XG4gICAgICAgICAgICA8bGFiZWwgZm9yPVwiZW50cnlUeXBlLSR7dGhpcy5pZH1cIj4ke3RoaXMubGFiZWx9PC9sYWJlbD5cbiAgICAgICAgPC9kaXY+YDtcbiAgICB9XG59IiwiaW1wb3J0IElFbnRyeVR5cGVHcm91cCBmcm9tICcuLi9pbnRlcmZhY2VzL0lFbnRyeVR5cGVHcm91cCc7XG5pbXBvcnQgSUVudHJ5VHlwZSBmcm9tICcuLi9pbnRlcmZhY2VzL0lFbnRyeVR5cGUnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFbnRyeVR5cGVHcm91cCBpbXBsZW1lbnRzIElFbnRyeVR5cGVHcm91cCB7XG4gICAgcHJpdmF0ZSBlbnRyeVR5cGVzOiBJRW50cnlUeXBlW107XG4gICAgcHJpdmF0ZSBub2RlOiBIVE1MRGl2RWxlbWVudDtcblxuICAgIGNvbnN0cnVjdG9yKGVudHJ5VHlwZXNHcm91cENvbnRhaW5lcjogSFRNTERpdkVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5ub2RlID0gZW50cnlUeXBlc0dyb3VwQ29udGFpbmVyO1xuICAgIH1cblxuICAgIHB1YmxpYyByZW5kZXIoKTogdm9pZCB7XG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMuZW50cnlUeXBlcyk7XG4gICAgICAgIGNvbnN0IGZpZWxkcyA9IHRoaXMubm9kZS5xdWVyeVNlbGVjdG9yQWxsKCcuZmllbGQuY2hlY2tib3hmaWVsZCcpO1xuICAgICAgICBjb25zdCBlbnRyeVR5cGVJZHM6IHN0cmluZ1tdID0gdGhpcy5lbnRyeVR5cGVzLm1hcCgoZW50cnlUeXBlOiBJRW50cnlUeXBlKSA9PiBlbnRyeVR5cGUuaWQudG9TdHJpbmcoKSk7XG5cbiAgICAgICAgZmllbGRzLmZvckVhY2goKGZpZWxkQ29udGFpbmVyOiBIVE1MRGl2RWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBjaGVja2JveDogSFRNTElucHV0RWxlbWVudCA9IGZpZWxkQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXScpO1xuICAgICAgICAgICAgY29uc3QgaWQ6IHN0cmluZyA9IGNoZWNrYm94LnZhbHVlO1xuXG4gICAgICAgICAgICBpZiAoZW50cnlUeXBlSWRzLmluY2x1ZGVzKGlkKSkge1xuICAgICAgICAgICAgICAgIC8vIHNob3dcbiAgICAgICAgICAgICAgICBmaWVsZENvbnRhaW5lci5oaWRkZW4gPSBmYWxzZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZmllbGRDb250YWluZXIuaGlkZGVuID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIHNldEVudHJ5VHlwZXMoZW50cnlUeXBlczogSUVudHJ5VHlwZVtdKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZW50cnlUeXBlcyA9IGVudHJ5VHlwZXM7XG4gICAgfVxufSIsImltcG9ydCBJU2VjdGlvbk1hcCBmcm9tIFwiLi4vaW50ZXJmYWNlcy9JU2VjdGlvbk1hcFwiO1xuaW1wb3J0IElFbnRyeVR5cGUgZnJvbSAnLi4vaW50ZXJmYWNlcy9JRW50cnlUeXBlJztcbmltcG9ydCBJQ2hhbm5lbCBmcm9tICcuLi9pbnRlcmZhY2VzL0lDaGFubmVsJztcbmltcG9ydCBFbnRyeVR5cGUgZnJvbSBcIi4vRW50cnlUeXBlXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb25NYXAgaW1wbGVtZW50cyBJU2VjdGlvbk1hcCB7XG4gICAgcHVibGljIHNlY3Rpb25zOiBJQ2hhbm5lbFtdO1xuICAgIHB1YmxpYyBlbnRyeVR5cGVzOiBJRW50cnlUeXBlW107XG5cbiAgICBjb25zdHJ1Y3RvcihzZWN0aW9uczogSUNoYW5uZWxbXSwgZW50cnlUeXBlczogSUVudHJ5VHlwZVtdKSB7XG4gICAgICAgIHRoaXMuc2VjdGlvbnMgPSBzZWN0aW9ucztcbiAgICAgICAgdGhpcy5lbnRyeVR5cGVzID0gZW50cnlUeXBlcy5tYXAoKGVudHJ5VHlwZU9iamVjdDogSUVudHJ5VHlwZSkgPT4gbmV3IEVudHJ5VHlwZShlbnRyeVR5cGVPYmplY3QpKTtcblxuICAgICAgICB0aGlzLmdldEVudHJ5VHlwZXNCeVNlY3Rpb25VaWQgPSB0aGlzLmdldEVudHJ5VHlwZXNCeVNlY3Rpb25VaWQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5nZXRFbnRyeVR5cGVzQnlTZWN0aW9uVWlkQXJyYXkgPSB0aGlzLmdldEVudHJ5VHlwZXNCeVNlY3Rpb25VaWRBcnJheS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmdldEVudHJ5VHlwZXNCeUNoYW5uZWxBcnJheSA9IHRoaXMuZ2V0RW50cnlUeXBlc0J5Q2hhbm5lbEFycmF5LmJpbmQodGhpcyk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldEVudHJ5VHlwZXNCeVNlY3Rpb25VaWQodWlkOiBzdHJpbmcpOiBJRW50cnlUeXBlW10ge1xuICAgICAgICBpZiAoIXVpZCB8fCAhdWlkLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1hdGNoaW5nVWlkOiBJRW50cnlUeXBlW10gPSB0aGlzLmVudHJ5VHlwZXMuZmlsdGVyKChlbnRyeVR5cGU6IElFbnRyeVR5cGUpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBlbnRyeVR5cGUuc2VjdGlvblVpZCA9PT0gdWlkO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKG1hdGNoaW5nVWlkICYmIG1hdGNoaW5nVWlkLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIG1hdGNoaW5nVWlkO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRFbnRyeVR5cGVzQnlTZWN0aW9uVWlkQXJyYXkodWlkczogc3RyaW5nW10pOiBJRW50cnlUeXBlW10ge1xuICAgICAgICBjb25zdCBlbnRyeVR5cGVzOiBJRW50cnlUeXBlW10gPSBbXTtcbiAgICAgICAgdWlkcy5mb3JFYWNoKCh1aWQ6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgdGhpcy5nZXRFbnRyeVR5cGVzQnlTZWN0aW9uVWlkKHVpZCkuZm9yRWFjaCgoZW50cnlUeXBlOiBJRW50cnlUeXBlKSA9PiB7XG4gICAgICAgICAgICAgICAgZW50cnlUeXBlcy5wdXNoKGVudHJ5VHlwZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGVudHJ5VHlwZXM7XG4gICAgfVxuXG4gICAgcHVibGljIGdldEVudHJ5VHlwZXNCeUNoYW5uZWxBcnJheShjaGFubmVsczogSUNoYW5uZWxbXSk6IElFbnRyeVR5cGVbXSB7XG4gICAgICAgIGNvbnN0IHVpZHM6IHN0cmluZ1tdID0gY2hhbm5lbHMubWFwKChjaGFubmVsOiBJQ2hhbm5lbCkgPT4gY2hhbm5lbC51aWQpO1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRFbnRyeVR5cGVzQnlTZWN0aW9uVWlkQXJyYXkodWlkcyk7XG4gICAgfVxufSIsIlxudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi9ub2RlX21vZHVsZXMvbWluaS1jc3MtZXh0cmFjdC1wbHVnaW4vZGlzdC9sb2FkZXIuanMhLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rjc3MtbG9hZGVyL3NyYy9pbmRleC5qcz8/ZW1iZWRkZWQhLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2xpYi9sb2FkZXIuanMhLi9maWVsZC5zY3NzXCIpO1xuXG5pZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcblxudmFyIHRyYW5zZm9ybTtcbnZhciBpbnNlcnRJbnRvO1xuXG5cblxudmFyIG9wdGlvbnMgPSB7XCJobXJcIjp0cnVlfVxuXG5vcHRpb25zLnRyYW5zZm9ybSA9IHRyYW5zZm9ybVxub3B0aW9ucy5pbnNlcnRJbnRvID0gdW5kZWZpbmVkO1xuXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2xpYi9hZGRTdHlsZXMuanNcIikoY29udGVudCwgb3B0aW9ucyk7XG5cbmlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuXG5pZihtb2R1bGUuaG90KSB7XG5cdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLi8uLi9ub2RlX21vZHVsZXMvbWluaS1jc3MtZXh0cmFjdC1wbHVnaW4vZGlzdC9sb2FkZXIuanMhLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rjc3MtbG9hZGVyL3NyYy9pbmRleC5qcz8/ZW1iZWRkZWQhLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2xpYi9sb2FkZXIuanMhLi9maWVsZC5zY3NzXCIsIGZ1bmN0aW9uKCkge1xuXHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi4vLi4vbm9kZV9tb2R1bGVzL21pbmktY3NzLWV4dHJhY3QtcGx1Z2luL2Rpc3QvbG9hZGVyLmpzIS4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4uLy4uL25vZGVfbW9kdWxlcy9wb3N0Y3NzLWxvYWRlci9zcmMvaW5kZXguanM/P2VtYmVkZGVkIS4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9saWIvbG9hZGVyLmpzIS4vZmllbGQuc2Nzc1wiKTtcblxuXHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXG5cdFx0dmFyIGxvY2FscyA9IChmdW5jdGlvbihhLCBiKSB7XG5cdFx0XHR2YXIga2V5LCBpZHggPSAwO1xuXG5cdFx0XHRmb3Ioa2V5IGluIGEpIHtcblx0XHRcdFx0aWYoIWIgfHwgYVtrZXldICE9PSBiW2tleV0pIHJldHVybiBmYWxzZTtcblx0XHRcdFx0aWR4Kys7XG5cdFx0XHR9XG5cblx0XHRcdGZvcihrZXkgaW4gYikgaWR4LS07XG5cblx0XHRcdHJldHVybiBpZHggPT09IDA7XG5cdFx0fShjb250ZW50LmxvY2FscywgbmV3Q29udGVudC5sb2NhbHMpKTtcblxuXHRcdGlmKCFsb2NhbHMpIHRocm93IG5ldyBFcnJvcignQWJvcnRpbmcgQ1NTIEhNUiBkdWUgdG8gY2hhbmdlZCBjc3MtbW9kdWxlcyBsb2NhbHMuJyk7XG5cblx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdH0pO1xuXG5cdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xufSJdLCJzb3VyY2VSb290IjoiIn0=